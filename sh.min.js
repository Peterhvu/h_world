function reCenterContent(){if(window.innerWidth>500){var e=window.innerWidth%($(".itm").outerWidth(!0)+6)/2;imgSection.css({"margin-left":e,"margin-right":e})}}function getMenuList(){var e="https://peterhvu.github.io/h_world/";appName.length>4?e+="seg2.json":e+="seg.json",$.getJSON(e,function(e){if(menuList=e,menuList.length>0){var n=$(document.createElement("ul")).addClass("segments").hide();$.each(menuList,function(e,t){n.append('<li><a href="'+t+'.html">'+t)}),n.insertAfter("h1").slideToggle()}else $("#segmentInput").show()})}function toggleMenu(){menuList?$(".segments").slideToggle():getMenuList()}function loadNextPage(){$(".paging.selectedBG").length>0?$(".paging.selectedBG").is(":last-child")?(paginNextSet(),loadNextPage()):$(".paging.selectedBG + .paging").click():$("#vLinks .paging:first").click()}function paginPreSet(){var e=parseInt($("#vLinks .paging").first().text());e>1&&($(".paging.selectedBG").removeClass("selectedBG"),resetPagingStartWith(e-$("#vLinks .paging").length))}function paginNextSet(){$(".paging.selectedBG").removeClass("selectedBG");var e=parseInt($("#vLinks .paging").last().text());resetPagingStartWith(e+1)}function resetPaging(){resetPagingStartWith(pagingFirst)}function resetPagingStartWith(e){$("#vLinks .paging").empty().removeClass("selectedBG").each(function(n,t){$(t).html(n+e)})}function enterFullScreenVideo(e){isIOS&&(e.play(),e.addEventListener("loadedmetadata",function(){e.webkitEnterFullscreen()})),isAndrd&&e.play().mozRequestFullScreen()}function exitFullScreenVideo(){var e=$("video.activeVidPlayer").get(0);e&&(e.webkitExitFullScreen(),e.pause())}function insertFancyBox(){$("head>script").after('<script src="src/jquery.fancybox.min.js"> </script> <link rel="stylesheet" type="text/css" href="src/jquery.fancybox.min.css">'),$(".clearout").before('<div class="clearout vidLarge" onclick="$.fancybox.open( $(\'.activeVidPlayer\'))">［  ］</div>')}function getJsonUsingYqlHtml(e,n,t){alert("YQL discountinued.")}function getJsonUsingYqlJson(e,n){alert("YQL discountinued.")}function getJsonUsingYqlXml(e,n){alert("YQL discountinued.")}function getJsonBins(e,n){$.getJSON(myJsonBaseUrl+e,function(e){n(e)})}function updateJsonBinOfLikes(e,n,t){getJsonBins(e,function(i){i.indexOf(n)<0?i.push(n):i.splice(i.indexOf(n),1),$.ajax({type:"PUT",url:myJsonBaseUrl+e,contentType:"application/json; charset=utf-8",data:JSON.stringify(i),success:function(e){t(!0)}}).fail(function(e,n,i){t(!1)})})}function loadSavedTag(e,n){if($("h1").after('<select class="popularTags">'),$(".popularTags").change(function(){$("#searchBox").val(this.value),startSearch()}),e.length>0){var t=[];e.forEach(function(e){t.push('<option value="'+e+'">'+e+"</option>")}),$(".popularTags").html(t)}n.length>0&&getJsonBins(n,function(e){var n=[],t=[];e.forEach(function(e){var i=atob(e);n.push('<option value="'+i+'">'+i+"</option>"),t.push(i)}),$(".popularTags").append(n),AutocomleteSearchWithTags(t)})}function updateTag(e,n,t){var i=!0,a=btoa(n),s=$(".popularTags");getJsonBins(e,function(o){t&&o&&o.indexOf(a)<0?(o.push(a),s.length>0&&s.append("<option value="+n+">"+n)):!t&&o&&o.indexOf(a)>=0?o.splice(o.indexOf(a),1):i=!1,i&&$.ajax({type:"PUT",url:myJsonBaseUrl+e,contentType:"application/json; charset=utf-8",data:JSON.stringify(o),success:function(e){imgSection.prepend("Search ",t?"saved":"deleted")}})})}function AutocomleteSearchWithTags(e){$("#searchBox").autocomplete({source:e,select:startSearch})}var menuList,ua=navigator.userAgent.toLowerCase(),isIOS=null!=ua.match(/i(phone|pod|pad)/),isIPad=null!=ua.match(/ipad/),isAndrd=null!=ua.match(/android/),isMac=null!=ua.match(/macintosh/),appName=window.location.pathname.split("/").pop().replace(".html",""),imgSection=$("#panes"),myJsonBaseUrl="https://api.myjson.com/bins/",pagingFirst=0,isYqlDiag=!1;console.log("userAgent, ua: ",ua),console.log("isIOS: ",isIOS,"isIPad: ",isIPad," isAndrd: ",isAndrd," isMac: ",isMac),$(document).ready(function(){document.title=appName,$("h1").html(appName),$("html").addClass(appName),isIOS&&($(".clearout").remove(),$(".androidOnly").remove(),$("linkHi").removeAttr("target")),$("h1").after('<a class="homeBtn" href="OneWebApp.html"> &#8962; </a><div class="menuBtn" onclick="toggleMenu();">&#9776;</div>')}),window.onresize=function(e){reCenterContent()},$(document).on("afterClose.fb",function(e,n,t){$("iframe.activeVidPlayer").remove(),$("video.activeVidPlayer").get(0)&&$(".activeVidPlayer").css("display","block").get(0).pause()}),jQuery.ajaxPrefilter(function(e){!isIOS&&e.crossDomain&&jQuery.support.cors&&e.url.indexOf("cloudflare")<0&&e.url.indexOf("myjson")<0&&e.url.indexOf("ntrex.")<0&&e.url.indexOf("github")<0&&(e.url="https://cors-anywhere.herokuapp.com/"+e.url)});